# python学习中的记录

<img src="http://upload-images.jianshu.io/upload_images/15675864-952291e89189c8a8.jpg">



记录python学习中遇到的一些心得：

[TOC]

***

### 8. os库的使用

> os库提供通用的、基本的操作系统交互功能
> - os库是Python标准库，包含几百个函数
> - 常用路径操作、进程管理、环境参数等几类

> - 路径操作：os.path子库，处理文件路径及信息
> - 进程管理：启动系统中其他程序
> - 环境参数：获得系统软硬件信息等环境参数

#### 8.1 os.path子库

```python
import os
from os.path import join
from IPython.core.interactiveshell import InteractiveShell 
# InteractiveShell.ast_node_interactivity = "all" # 可同时输出多个结果
```

```python
# 1. 判断是否是文件  filepath最后没有/ 默认取//
filepath = '../res/file_op/folder/'
'is file' if os.path.isfile(filepath) else 'is folder'
'is dir' if os.path.isdir(filepath) else 'not dir'

'is folder'
'is dir
```

```python
# 2. 创建、删除文件与文件夹
newfolder = '../res/file_op/mkfolder/'
os.mkdir(newfolder) # 创建文件夹,不会递归创建不存在的父目录
# os.makedirs(newfolder) # 父目录不存在，则递归创建父目录
os.rmdir(newfolder) # 如果要删除目录，请使用rmdir().
import shutil
shutil.rmtree(path)    # 递归删除文件夹

if os.path.exists(join(filepath,'file_0.txt')):
    os.remove(join(filepath,'file_0.txt')) # 删除文件
    # os.path.join('savepath', 'png/demo')   #正确
    # os.path.join('savepath', '/png/demo')  #错误
```

```python
# 3. 列出目录下的所有子目录
path = '../res/file_op'
for dirpath, dirnames, filenames in os.walk(path):
    for dirname in dirnames:
        print(os.path.join(dirpath, dirname))
../res/file_op\folder

# 4. 列出目录下的所有文件
for dirpath, dirnames, filenames in os.walk(path):
    for filename in filenames:
        print(os.path.join(dirpath, filename))
../res/file_op\file_ico.png
../res/file_op\folder\file_1.txt  

filepath = '../res/file_op'
fileList = os.listdir(filepath) # 列出所有文件
for fl in fileList:
    print(fl)
file_1.txt
```

```python
# 5. 修改目录名称
os.rename('d0/d10/d100', 'D100')    	# 会导致目录移动！
os.path.abspath(path)                   # 获取一个路径的完全路径
os.path.splitext(path)                  # 分离文件名和扩展名
os.path.normpath( "D://PYE//file.txt" ) # 归一化path的表示形式，统一用\\分隔路径
# 返回当前程序与文件之间的相对路径 (relative path)
os.path.relpath( "C://PYE//file.txt" )
'..\\..\\..\\..\\..\\..\\..\\PYE\\file.txt'
os.path.getsize( "D:/PYE/file.txt" )    # 返回path对应文件的大小，以字节为单位
```

```python
# 6. 分割文件目录/文件名和后缀
file_path = "D:/test/test.py"
(filepath,tempfilename) = os.path.split(file_path)
(filename,extension) = os.path.splitext(tempfilename)
D:/test test.py
test .py
```

```python
# 7. 复制和移动(shutil模块)
import shutil
# shutil.copy(srcfile, dstfile) : 复制srcfile文件，并命名为dstfile
shutil.copy('d0/file1.txt', 'd0/file2.txt')
# shutil.copy(srcfile, path) : 复制srcfile文件到path路径下
shutil.copy('d0/file1.txt', '..')     
# shutil.copytree(srcDir, dstDir) : 递归地复制srcDir目录，并命名为dstDir；dstDir不能是已经存在的！
shutil.copytree('d0/', 'D0')

# shutil.move(srcfile, dstfile) : 移动srcfile文件并命名为dstfile，相当于文件重命名
shutil.move('d0/file1.txt', 'd0/FILE1.txt')
# shutil.move(srcfile, path) ： 移动srcfile文件到path路径下
shutil.move('d0/file2.txt', '.')
# shutil.move(srcDir, dstDir) ： 移动srcDir目录(包括其子目录和文件)到dstDir目录下
shutil.move('d0', 'D0')
```



#### 8.2 os库之进程管理

```python
# 执行程序或命令command
# 在Windows系统中，返回值为cmd的调用返回信息
import os
os.system("C:\\Windows\\System32\\calc.exe")

os.system("C:\\Windows\\System32\\mspaint.exe D:\\PYECourse\\grwordcloud.png")

```

#### 8.3 查看剩余空间大小(ubuntu)

```python
def checkDis(path):
    import os
    hd = {}
    disk = os.statvfs(path)
    percent = (disk.f_blocks - disk.f_bfree) * 100 / \
                (disk.f_blocks - disk.f_bfree + disk.f_bavail) + 1
    return 100 - percent
```



#### 8.4 os库之环境参数

```python
# 1. 获取或改变系统环境信息
# 修改当前程序操作的路径
>>>os.chdir("D:")
# 返回程序的当前路径
>>>os.getcwd()
'D:\\'

# 2. 获取操作系统环境信息
获得当前系统登录用户名称
>>>os.getlogin()
'hyc'
# 获得当前系统的CPU数量
>>>os.cpu_count()
8

# 3. 获取操作系统环境信息
获得n个字节长度的随机字符串，通常用于加解密运算
>>>os.urandom(10)
b'7\xbe\xf2!\xc1=\x01gL\xb3'
```
