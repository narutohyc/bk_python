# python学习中的记录

<img src="http://upload-images.jianshu.io/upload_images/15675864-952291e89189c8a8.jpg">



记录python学习中遇到的一些心得：

[TOC]

***

### 9. 文件的使用

>**文件是数据的抽象和集合**
>
>- 文件是存储在辅助存储器上的数据序列
>- 文件是数据存储的一种形式
>- 文件展现形态：文本文件和二进制文件
>
>**文本文件 vs. 二进制文件**
>
>- 文件文件和二进制文件只是文件的展示方式
>- 本质上，所有文件都是二进制形式存储
>- 形式上，所有文件采用两种方式展示
>
>**文本文件**
>
>- 由单一特定编码组成的文件，如UTF-8编码
>- 由于存在编码，也被看成是存储着的长字符串
>- 适用于例如：.txt文件、.py文件等
>
>**二进制文件**
>
>- 直接由比特0和1组成，没有统一字符编码
>- 一般存在二进制0和1的组织结构，即文件格式
>- 适用于例如：.png文件、.avi文件等
>
>![1568520626698](res/Python%20Base/1568520626698.png)
>
>

#### 9.1 文件打开和关闭

```python
a = open("f.txt", "rt")
a.read(size)                  # - 一次读入，统一处理
a.readline(size)              # - 按数量读入，逐步处理
a.readlines(hint)             # - 一次读入，分行处理

a.write(s)
a.writelines(lines)
a.seek(offset)

f = open("f.txt")             # - 文本形式、只读模式、默认值
f = open("f.txt", "rt")       # - 文本形式、只读模式、同默认值
f = open("f.txt", "w")        # - 文本形式、覆盖写模式
f = open("f.txt", "a+")       # - 文本形式、追加写模式+ 读文件
f = open("f.txt", "x")        # - 文本形式、创建写模式
f = open("f.txt", "b")        # - 二进制形式、只读模式
f = open("f.txt", "wb")       # - 二进制形式、覆盖写模式

```

> <变量名> = open(<文件名>, <打开模式>, encoding='utf-8')
> 文件句柄 文件路径和名称 文本 or 二进制
>
> <变量名>.close()
>
> **打开模式**
>
> | 文件的打开模式 | 描述                                                    |
> | -------------- | ------------------------------------------------------- |
> | 'r'            | 只读模式，默认值，如果文件不存在，返回FileNotFoundError |
> | 'w'            | 覆盖写模式，文件不存在则创建，存在则完全覆盖            |
> | 'x'            | 创建写模式，文件不存在则创建，存在则返回FileExistsError |
> | 'a'            | 追加写模式，文件不存在则创建，存在则在文件最后追加内容  |
> | 'b'            | 二进制文件模式                                          |
> | 't'            | 文本文件模式，默认值                                    |
> | '+'            | 与r/w/x/a一同使用，在原功能基础上增加同时读写功能       |
>
> ![1568520648273](res/Python%20Base/1568520648273.png)



####  9.2 文件内容的读取

```python
# 读入全部内容，如果给出参数，读入前size长度
# <f>.read(size=-1)
>>>s = f.read(2)
中国

# 读入一行内容，如果给出参数，读入该行前size长度
# <f>.readline(size=-1)
>>>s = f.readline()
中国是一个伟大的国家！

# 读入文件所有行，以每行为元素形成列表
# 如果给出参数，读入前hint行
# <f>.readlines(hint=-1)
while True:
	lines = f.readlines(100000)
	if not lines:
		break
	for line in lines:
		pass # do something

# 1）将嵌套列表或字典转为json格式数据
import json
f=open('a1.txt','w',encoding='utf-8')
dic={1:'张三',2:'李四'}
dic2={11:'张三三',2:'李思思'}
a=json.dumps(dic)
f.write(a+'\n')
b=json.dumps(dic2)
f.write(b+'\n')
f.close()

# 2)将文件中的列表或字典json字符串读取出来
import json
f=open('a1.txt','r',encoding='utf-8')
for i in f:
    print(json.loads(i))
f.close()
```

#### 9.3 数据的文件写入

```python
# 向文件写入一个字符串或字节流
>>>f.write("中国是一个伟大的国家!")

# 改变当前文件操作指针的位置，offset含义如下：
# 0 – 文件开头； 1 – 当前位置； 2 – 文件结尾
# seek（offset [,from]）方法改变当前文件的位置。Offset变量表示要移动的字节数。From变量指定开始移动字节的参考位置。
# 如果from被设为0，这意味着将文件的开头作为移动字节的参考位置。如果设为1，则使用当前的位置作为参考位置。如果它被设为2，那么该文件的末尾将作为参考位置。
>>>f.seek(0) #回到文件开头

# 查看指针位置
f.tell()

ls = ["中国", "法国", "美国"]
fo.writelines(ls)
```

#### 9.4 File对象的属性

| 属性           | 描述                                                         |
| :------------- | :----------------------------------------------------------- |
| file.closed    | 返回true如果文件已被关闭，否则返回false。                    |
| file.mode      | 返回被打开文件的访问模式。                                   |
| file.name      | 返回文件的名称。                                             |
| file.softspace | 如果用print输出后，必须跟一个空格符，则返回false。否则返回true。 |



